<!DOCTYPE html>
<meta charset="UTF-8">
<script src="JS/jquery.min.js"></script>
<script type="text/javascript" src="./JS/echarts.common.min.js"></script>
<script>
    $(function () {
        var json;
        var dataChart = echarts.init($("#dataChart")[0]);
        $.ajax({
            url: "adminOrderStatistics",
            data: {},
            success: function (result) {
                json = JSON.parse(result);
                console.log(json);
                var mealSale = [];
                var name = "摩卡";
                for(var i in json.data){
                    if (!json.data.hasOwnProperty(i)) continue;
                    var date = json.data[i].date.split(" ")[0];
                    for(var j in json.data[i].items){
                        if (!json.data[i].items.hasOwnProperty(j)) continue;
                        var k = json.data[i].items[j];
                        if(k.mealName === name){
                            if(mealSale[date] === undefined)
                                mealSale[date] = 0;
                            mealSale[date] += k.sales;
                        }
                    }
                }
                var sales = [];
                for(var l in mealSale){
                    if(!mealSale.hasOwnProperty(l)) continue;
                    sales.push([l , mealSale[l]]);
                }
                sales.sort(function (a, b) {
                    return Date.parse(a[0]) - Date.parse(b[0]);
                });
                console.log(sales);

                dataChart.setOption({
                    title:{},
                    legend:{
                    },
                    tooltip:{
                        trigger:"axis"
                    },
                    grid:[{x:"8%" , y:"7%"}],
                    xAxis:[{
                        type:"category",
                        boundaryGap:false
                    }],
                    yAxis:[{
                        type:"value"
                    }],
                    series:[{
                        id:"日期销量",
                        type:"line",
                        data:sales
                    }]
                })
            }
        });
    })
</script>

<html>
<head>
</head>
<body>
<div id="dataChart" style="width:100% ; height: calc(100% - 49px); overflow: hidden"></div>
</body>
</html>